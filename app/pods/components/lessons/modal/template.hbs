<FullScreenDialog
  @close={{action this.closeModal this.lesson}}
  @title={{concat "Create Lesson"}}
  @topBarDialog={{true}}
  @dialogNoPadding={{true}}
>
  <div class="lesson-modal">
    <PaperTabs @stretch={{true}} @borderBottom={{true}} @selected={{this.selectedLessonItem}} @onChange={{action (mut this.selectedLessonItem)}} as |tabs|>
      {{#each this.lesson.lessonItems as |lessonItem|}}
        <tabs.tab @value={{lessonItem}}>
          {{lessonItem.name}}
        </tabs.tab>
      {{/each}}
    </PaperTabs>

    {{#liquid-bind (hash tab=this.selectedLessonItem.index lessonItem=this.selectedLessonItem) class="md-padding dynamic-animation" as |current|}}
      <h3 class="md-title margin-1">{{current.lessonItem.name}}</h3>
      <div class="layout-column lesson-details-list">
        <div>Date:</div>
        <div>{{this.lesson.formattedDate}}</div>
        <div>Classroom:</div>
        <div>{{this.lesson.enrollment.classroom.name}}</div>
        <div>Student:</div>
        <div>{{this.lesson.enrollment.student.formattedName}}</div>
      </div>
      <LessonItemSelector @lessonItem={{current.lessonItem}}/>

      <div class='star-rating-container'>
        <StarRating
          @rating={{current.lessonItem.rating}}
          @wholeOnly={{true}}
          @useHalfStars={{false}}
          @fillColor="green"
          @onClick={{action 'setRating' current.lessonItem}}/>
      </div>

      <div class="dialog-actions">
        <PaperButton @primary={{true}} @onClick={{action this.closeModal this.lesson}}>
          Cancel
        </PaperButton>
        <PaperButton @primary={{true}} @onClick={{action this.saveLessonItem this.lesson current.lessonItem this.type}}>
          Save {{current.lessonItem.name}}
        </PaperButton>
      </div>
    {{/liquid-bind}}
  </div>
</FullScreenDialog>
